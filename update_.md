# 開発日報

よけいな情報でなんだか見づらくなるので
書き方のルールを決めて書いていく

以下、サンプル

## さんぷる～　日付

進捗

------------
目標：何を成し遂げるのか明確な目標をここに書く  


工程: 大きな開発課題をロードマップ的に書く  


    例：
    1. 設計
    2. プログラム構成       <-- イマココ
    3. コントロールの作成
    4. モデルの作成
    5. ビューの作成
    とか
タスク：大きな開発課題の達成のために解決すべきタスクを書く

    例：
    @ プログラムの構成
    1. 処理内容のアイディアをひねり出す     済
    2. 処理イメージを絵にかきだす       済
    3. 各処理の細かな内容を詰める       <-- イマココ
    4. 各処理の役割を明確にする
    5. チームへの報告
    とか

------------

タスク達成のための成果や問題を端的に書き出す

1. 処理内容にアイディアをひねり出す


## 6/30

進捗  
-----------------------------------------------------  
目標：

    ネイティブアプリでwebラジオを自動録音・保存・通知するアプリケーションの作成

工程:

    1. 番組表取得パート     <-- イマココ
    2. 予約機能パート
    3. UIパート


問題：

    1. サーバをレンタルする必要があるか
    2. 

タスク：
    @ 番組取得パート
    - `if tmp_dt < criterion:`以降の処理では日付を追うごとに番組が取得できなくなる 主に`colpsan`に対応してから
    - 
---------------------------------------------------



ag.pyは最終的にmain_dataを返す
main_data2はmain_dataを返す前にmain_dataへ統合される

ちゃんと調べていないけれど、
日付を過ぎてからの番組はmain_dataへ
6:00~24:00までの番組はmain_data2へ挿入される仕組みの模様

おそらく問題は、リスト1~3の中身が空っぽであるところ
ag.py::create_table()で出力できた、main_data
12:30~12:40の番組は取得できるようになった

7/1:

ag_copy.pyを作成
ｲﾃﾚｰﾀの役割
itrとiterator2は同じ値をとる
itrはwhile()ループ中は使わないので、
while()ループ中はiterator2が最終的にitrと帳尻が合えばよい


7/2：

致命的なミスをしていた
そもそも車輪の再発名は完全に必要なかった
**なぜならばそもそも番組情報の取得先のURLが間違っていたから**
マチガイ："https://www.joqr.co.jp/qr/agregularprogram/"
正しい："https://www.agqr.jp/timetable/streaming.html"

ただしいURLならば、コピペ元のコードは完全に番組を取得できていた...
時間の無駄した～...

なので./playground/ag.py他もはや使わないよ
BeautifulSoup4の使い方をすこし習得できたのはわずかな収穫



## 7/3

進捗  
-----------------------------------------------------  
目標：

    ネイティブアプリでwebラジオを自動録音・保存・通知するアプリケーションの作成

工程:

    1. 番組表取得パート     <-- ほぼ済
    2. 予約機能パート       <-- 次
    3. UIパート
    ※. アプリケーション機能の連携があやふや


問題：

    1. サーバをレンタルする必要があるか
    2. 

タスク：

    - 予約は何に対して予約するのか
    対象を明確にするにはサーバのレンタルをするのか
    PCをつけっぱなしにするのか
    決めなくてはならないね～
    --> Herokuの定期実行を使おう

    - デプロイしてから実行できるようにアプリを形にする
    具体的には
        - Linux環境を前提にする
        - Linux環境下で自動実行できるようにする


---------------------------------------------------

#### さくらレンタルサーバ

料金: 524円/月
容量: 100GB
転送: 700GB/月


#### 自動起動

方法
- .batファイルでpythonスクリプトを実行する
- Windowsのタスクスケジューラに登録する
- Herokuに登録して定期実行させる

#### Herokuに登録して定期実行させる

Herokuにアプリケーションをデプロイしてみる

フリープランに収める!!
...と行きたいところですが
ぶっちゃけわからんからやってみてからかかったらやめてみよう


ということでHerokuにデプロイする（サーバサイドで実行できる）アプリケーションを形にしよう


そもそも定期実行で大丈夫なのか？
ずっと起動していて予約の時間になったらコマンド生成して保存するのか
Herokuの定期実行機能を使って


まぁいいや


#### 自動化

アプリケーションを起動する
任意でまたは週に一度は番組表を取得する（番組表を更新する）
番組表一覧から予約する番組を選択する（どの番組、どの時間からどの時間まで）
番組の時間になったら保存処理開始するようにスケジュールを作成する
スケジュールの時間になったら保存開始する
スケジュールの終了時間になったら保存終了し、指定の拡張子で保存する
スケジュールが完了する
スケジュールが正常に完了したら、通知を飛ばす

タスク
- 番組表一覧の表示（ターミナル）
- ターミナル上に表示された番組から予約する番組を選択する機能
- スケジューラの仕様（予約された番組をどうやって保存して、どうやって「スケジュール」するのか）
- Linuxでのアプリケーション自動起動機能の模索（時間になったら起動する機能）


#### 番組予約機能の開発

##### 番組一覧をターミナルに表示させよう

学習してアウトプットして

- jsonファイルの読み書き
- コンソール入出力、上書き出力



#### アプリケーション機能のアイディアをまとめる

番組取得: スクレイピングで取得し、JSONファイルで返す
予約機能：
    JSONファイルを基に番組一覧のビューを表示する        
    <-- そもそもUbuntuでビューは表示できるのか?
    <-- UbuntuでGUIが表示できない場合、コンソール表示で
    予約番組が決定され、予約番組に関するJSONファイルを返す
    スケジュール機能を設ける
    <--Herokuの定期実行 or アプリケーションを自前のPCでつけっぱなし（タスクスケジューラ）
    